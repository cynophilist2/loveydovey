<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>A Letter For You</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
:root {
  --paper: #f2e6c9;
  --ink: #3a2c28;
  --shadow: rgba(0,0,0,0.25);
  --wax: #7a1f1f;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle, #2a221c, #15110e);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Playfair Display', serif;
  padding: 16px;
}

/* ================= ENVELOPE ================= */
#envelope {
  width: min(360px, 100%);
  height: 240px;
  position: relative;
  perspective: 1200px;
}

/* envelope body */
.env-body {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #f9f5ee, #e6dcc7);
  border-radius: 6px;
  box-shadow: 0 25px 50px var(--shadow);
  padding: 26px 16px;
  text-align: center;
  z-index: 3;
}

/* top flap (behind content) */
.env-flap {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 55%;
  background: linear-gradient(135deg, #efe6d2, #ddd1b8);
  clip-path: polygon(0 0, 100% 0, 50% 100%);
  transform-origin: top;
  z-index: 1;
  transition: transform 1.2s ease;
}

/* wax seal */
.wax-seal {
  position: absolute;
  top: 42%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 64px;
  height: 64px;
  background: radial-gradient(circle at top left, #a52a2a, var(--wax));
  border-radius: 50%;
  box-shadow:
    inset -4px -4px 8px rgba(0,0,0,0.4),
    inset 4px 4px 8px rgba(255,255,255,0.2),
    0 12px 24px rgba(0,0,0,0.4);
  z-index: 4;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #f4dcdc;
  font-family: 'Great Vibes', cursive;
  font-size: 22px;
  transition: transform 0.6s ease, opacity 0.6s ease;
}

/* crack animation */
.wax-seal.break {
  transform: translate(-50%, -50%) scale(1.3) rotate(12deg);
  opacity: 0;
}

/* opening */
#envelope.open .env-flap {
  transform: rotateX(-180deg);
}

#envelope.open {
  animation: envelopeFade 1.4s ease forwards;
  animation-delay: 1s;
}

@keyframes envelopeFade {
  to {
    opacity: 0;
    transform: scale(0.9);
  }
}

.seal-title {
  font-family: 'Great Vibes', cursive;
  font-size: 34px;
  margin-bottom: 14px;
}

input {
  width: 80%;
  padding: 10px;
  font-size: 16px;
  border: none;
  border-bottom: 1px solid #555;
  background: transparent;
  text-align: center;
  outline: none;
}

button {
  margin-top: 16px;
  padding: 10px 24px;
  background: #3a2c28;
  color: white;
  border: none;
  border-radius: 20px;
}

.error {
  margin-top: 8px;
  font-size: 14px;
  color: darkred;
}

/* ================= LETTER ================= */
#letter {
  display: none;
  max-width: 900px;
  width: 100%;
  background: var(--paper);
  padding: clamp(30px, 6vw, 70px);
  border-radius: 8px;
  box-shadow: 0 35px 70px var(--shadow);
  position: relative;
  animation: reveal 1.6s ease forwards;
}

@keyframes reveal {
  from { opacity: 0; transform: translateY(40px); }
  to { opacity: 1; transform: translateY(0); }
}

#letter::after {
  content: "";
  position: absolute;
  inset: 0;
  background: url("https://www.transparenttextures.com/patterns/paper-fibers.png");
  opacity: 0.25;
  pointer-events: none;
}

/* ================= HANDWRITING ================= */
.handwriting {
  font-family: 'Great Vibes', cursive;
  font-size: clamp(24px, 5.5vw, 30px);
  color: var(--ink);
  white-space: pre-wrap;
  overflow: hidden;
  border-right: 2px solid rgba(0,0,0,0.3);
  animation: caret 1s steps(1) infinite;
  position: relative;
  z-index: 1;
}

@keyframes caret {
  50% { border-color: transparent; }
}

/* ================= PHOTOS ================= */
.photos {
  margin-top: 50px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 22px;
  position: relative;
  z-index: 1;
}

.photo {
  background: white;
  padding: 10px;
  box-shadow: 0 12px 24px var(--shadow);
  transform: rotate(-2deg);
}

.photo:nth-child(even) {
  transform: rotate(3deg);
}

.photo img {
  width: 100%;
  height: 180px;
  object-fit: cover;
}

/* ================= WAX SEAL MUSIC BUTTON ================= */
#waxSeal {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  background: radial-gradient(circle at top left, #a52a2a, var(--wax));
  border-radius: 50%;
  box-shadow:
    inset -4px -4px 8px rgba(0,0,0,0.4),
    inset 4px 4px 8px rgba(255,255,255,0.2),
    0 10px 20px rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #f4dcdc;
  font-size: 22px;
  cursor: pointer;
  user-select: none;
  z-index: 20;
  opacity: 0;
  pointer-events: none;
  transition: transform 0.2s ease, opacity 0.4s ease;
}

#waxSeal.show {
  opacity: 1;
  pointer-events: auto;
}

#waxSeal:active {
  transform: scale(0.92);
}
</style>
</head>
<body>

<!-- ENVELOPE -->
<div id="envelope">
  <div class="env-flap"></div>
  <div class="wax-seal" id="frontSeal">♡</div>

  <div class="env-body">
    <div class="seal-title">For You</div>
    <p>Enter the password</p>
    <input type="password" id="password" />
    <br>
    <button onclick="unlock()">Open</button>
    <div class="error" id="error"></div>
  </div>
</div>

<!-- LETTER -->
<div id="letter">
  <div class="handwriting" id="text"></div>

  <div class="photos">
    <div class="photo"><img src="image1.jpg"></div>
    <div class="photo"><img src="image2.jpg"></div>
    <div class="photo"><img src="image3.jpg"></div>
  </div>
</div>

<!-- MUSIC TOGGLE -->
<div id="waxSeal" onclick="toggleMusic()">⏸</div>

<audio id="music" src="Laufey_Valentine.mp3" loop></audio>

<audio id="paper" src="paper.mp3"></audio>

<script>
const PASSWORD = "yourpassword";

const LETTER_TEXT = `
My love,

If you are reading this, then you chose to open something
that was never meant to be rushed.

I wanted to leave you words that feel like a hand held gently,
like a quiet moment where the world softens around you.

Loving you has taught me how small moments can become sacred—
how your presence alone can feel like home.

On the days you doubt yourself,
on the nights that feel a little too quiet,
remember this:

You are deeply wanted.
You are endlessly cherished.
You are loved in ways that words will always struggle to explain.

And somehow, still,
I will keep trying.

Always yours,
Me
`;

let index = 0;
const speed = 38;

function unlock() {
  const input = document.getElementById("password").value;
  const envelope = document.getElementById("envelope");
  const seal = document.getElementById("frontSeal");

  if (input === PASSWORD) {
    seal.classList.add("break");
    envelope.classList.add("open");
    document.getElementById("paper").play();

    setTimeout(() => {
      envelope.style.display = "none";
      document.getElementById("letter").style.display = "block";
      document.getElementById("waxSeal").classList.add("show");
      startMusic();
      typeLetter();
    }, 1900);
  } else {
    document.getElementById("error").textContent = "That isn’t it.";
  }
}

function typeLetter() {
  const target = document.getElementById("text");
  if (index < LETTER_TEXT.length) {
    target.textContent += LETTER_TEXT.charAt(index);
    index++;
    setTimeout(typeLetter, speed);
  }
}

function startMusic() {
  const music = document.getElementById("music");
  music.volume = 0;
  music.play();

  let fade = setInterval(() => {
    if (music.volume < 0.35) {
      music.volume += 0.01;
    } else {
      clearInterval(fade);
    }
  }, 120);
}

function toggleMusic() {
  const music = document.getElementById("music");
  const seal = document.getElementById("waxSeal");

  if (music.paused) {
    music.play();
    seal.textContent = "⏸";
  } else {
    music.pause();
    seal.textContent = "▶";
  }
}
</script>

</body>
</html>
